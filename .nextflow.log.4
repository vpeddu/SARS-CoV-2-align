Mar-06 20:58:22.199 [main] DEBUG nextflow.cli.Launcher - $> nextflow run main.nf --INPUT_FOLDER scratch/ --OUTDIR scratch/out/ -work-dir scratch/work/ -with-trace
Mar-06 20:58:22.272 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 20.01.0
Mar-06 20:58:22.280 [main] INFO  nextflow.cli.CmdRun - Launching `main.nf` [mad_hodgkin] - revision: e53cddf55e
Mar-06 20:58:22.289 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /Users/gerbix/Documents/vikas/SARS-CoV-2-align/nextflow.config
Mar-06 20:58:22.290 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /Users/gerbix/Documents/vikas/SARS-CoV-2-align/nextflow.config
Mar-06 20:58:22.307 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Mar-06 20:58:22.591 [main] DEBUG nextflow.Session - Session uuid: 2e616d7e-d11b-4584-8c79-45844c4aa85c
Mar-06 20:58:22.592 [main] DEBUG nextflow.Session - Run name: mad_hodgkin
Mar-06 20:58:22.592 [main] DEBUG nextflow.Session - Executor pool size: 8
Mar-06 20:58:22.626 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 20.01.0 build 5264
  Created: 12-02-2020 10:14 UTC (02:14 PDT)
  System: Mac OS X 10.14.6
  Runtime: Groovy 2.5.8 on Java HotSpot(TM) 64-Bit Server VM 11.0.1+13-LTS
  Encoding: UTF-8 (UTF-8)
  Process: 50294@uw-virongs-vikas.local [140.142.101.178]
  CPUs: 8 - Mem: 40 GB (390.7 MB) - Swap: 9 GB (926 MB)
Mar-06 20:58:22.641 [main] DEBUG nextflow.Session - Work-dir: /Users/gerbix/Documents/vikas/SARS-CoV-2-align/scratch/work [Mac OS X]
Mar-06 20:58:22.641 [main] DEBUG nextflow.Session - Script base path does not exist or is not a directory: /Users/gerbix/Documents/vikas/SARS-CoV-2-align/bin
Mar-06 20:58:22.655 [main] DEBUG nextflow.Session - Observer factory: TowerFactory
Mar-06 20:58:22.658 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Mar-06 20:58:22.741 [main] DEBUG nextflow.Session - Session start invoked
Mar-06 20:58:22.745 [main] DEBUG nextflow.trace.TraceFileObserver - Flow starting -- trace file: /Users/gerbix/Documents/vikas/SARS-CoV-2-align/trace.txt
Mar-06 20:58:22.936 [main] WARN  nextflow.NextflowMeta$Preview - DSL 2 IS AN EXPERIMENTAL FEATURE UNDER DEVELOPMENT -- SYNTAX MAY CHANGE IN FUTURE RELEASE
Mar-06 20:58:22.939 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Mar-06 20:58:23.035 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: Align, Trim
Mar-06 20:58:23.097 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:Trim` matches process Trim
Mar-06 20:58:23.101 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-06 20:58:23.101 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-06 20:58:23.104 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Mar-06 20:58:23.107 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=8; memory=40 GB; capacity=8; pollInterval=100ms; dumpInterval=5m
Mar-06 20:58:23.148 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > Trim -- maxForks: 8; blocking: false
Mar-06 20:58:23.171 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:Align` matches process Align
Mar-06 20:58:23.173 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-06 20:58:23.173 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-06 20:58:23.175 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > Align -- maxForks: 8; blocking: false
Mar-06 20:58:23.195 [main] DEBUG nextflow.Session - Ignite dataflow network (3)
Mar-06 20:58:23.200 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > Trim
Mar-06 20:58:23.201 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > Align
Mar-06 20:58:23.201 [main] DEBUG nextflow.script.ScriptRunner - > Await termination 
Mar-06 20:58:23.201 [main] DEBUG nextflow.Session - Session await
Mar-06 20:58:23.204 [PathVisitor-1] DEBUG nextflow.file.PathVisitor - files for syntax: glob; folder: scratch/; pattern: *.fastq.gz; options: [:]
Mar-06 20:58:23.283 [Actor Thread 4] ERROR nextflow.processor.TaskProcessor - Error executing process > 'Trim (2)'

Caused by:
  Unknown variable 'basedir' -- Make sure it is not misspelt and defined somewhere in the script before using it

Source block:
  """
  #!/bin/bash
  
  set -e
  
  # For logging and debugging, list all of the files in the working directory
  ls -lahtr
  
  # Get the sample name from the file name
  sample_name=\$(echo ${r1} | sed 's/.R1_001.fastq.gz//')
  echo "Processing \$sample_name"
  
  # Rename the input file to make sure we don't use it as the output
  mv ${r1} INPUT.${r1}
  
  echo "Trimming ${r1}"
  bbduk.sh \
      in=${r1} \
      out=test.out \
      ktrim=r \
      k=23 \
      mink=11 \
      hdist=1 \
      tpe \
      minlength=60 \
      tbo \
      qtrim=r \
      trimq=10 \
      adapters="${basedir}/adapters.fa"
  """

Tip: you can try to figure out what's wrong by changing to the process work dir and showing the script file named `.command.sh`
Mar-06 20:58:23.287 [Actor Thread 4] DEBUG nextflow.Session - Session aborted -- Cause: Process `null` script contains error(s)
Mar-06 20:58:23.301 [Actor Thread 4] DEBUG nextflow.Session - The following nodes are still active:
[process] Trim
  status=ACTIVE
  port 0: (queue) closed; channel: r1
  port 1: (cntrl) -     ; channel: $

[process] Align
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: r1
  port 1: (cntrl) -     ; channel: $

Mar-06 20:58:23.303 [main] DEBUG nextflow.Session - Session await > all process finished
Mar-06 20:58:23.303 [main] DEBUG nextflow.Session - Session await > all barriers passed
Mar-06 20:58:23.304 [Actor Thread 6] DEBUG nextflow.extension.PublishOp - Publish operator complete
Mar-06 20:58:23.304 [Actor Thread 7] DEBUG nextflow.extension.PublishOp - Publish operator complete
Mar-06 20:58:23.308 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=0; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=0ms; failedDuration=0ms; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=0; peakCpus=0; peakMemory=0; ]
Mar-06 20:58:23.308 [main] DEBUG nextflow.trace.TraceFileObserver - Flow completing -- flushing trace file
Mar-06 20:58:23.503 [main] DEBUG nextflow.CacheDB - Closing CacheDB done
Mar-06 20:58:23.518 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
